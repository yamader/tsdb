<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>YamaDB</title>
<style>
  main {
    max-width: 38rem;
    padding: 2rem;
    margin: auto;
  }
  footer {
    text-align: center;
  }
  iframe {
    width: 100%;
    height: min(45vw, 20rem);
    border: 1px solid;
    border-radius: .2rem;
  }
</style>
<main>
  <h1>YamaDB (beta)</h1>
  <hr>
  <p>現在のレコード数: <span id="n">0</span></p>
  <h2>部屋の気温</h2>
  <iframe src="chart?q=myroom/t&max=35&min=10"></iframe>
  <hr>
  <footer>
    <small>&copy; 2024 <a href="https://yamad.me">YamaD</a></small>
  </footer>
</main>
<script>
  const e = document.getElementById("n")
  const f = () =>
    fetch("/meta/n")
      .then(r => r.text())
      .then(n => (e.innerText = n))
  f()
  setInterval(f, 10000)
</script>
